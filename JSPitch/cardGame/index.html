<!DOCTYPE html>
<html>
<head>
  <script src="/socket.io/socket.io.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
</head>
<body>
	<script>
document.write("Hello World!")
</script> 
<script>
var host = "localhost:8080";
var playerTurn;

getName();
function getName(){
  var x;

    while(name == null||name==""){
      var name=prompt("Please enter your name");

      if (name!=null){
        x="Your name is " + name;
        
      }
    }
  }
  // var player = new Object();
  // player. 
  var player = new Object();
  var socket = io.connect();
  socket.on('date', function(data){
    $('#date').text(data.date);
  });

  socket.on('player', function(playerObj){
    player.id = playerObj;
    player.name = name;
    player.hand = [];
    player.points = 0;
    console.log(player.id);
  });

  socket.on('bid', function(bidInfo){
    highBid=bidInfo.highBid;
    highBidder=bidInfo.highBidder;
    playerTurn=bidInfo.playerTurn;
    suit = bidInfo.suit;
  }
   
  $(document).ready(function(){
    $('#text').keypress(function(e){
      socket.emit('client_data', {'letter': String.fromCharCode(e.charCode)});
    });
  });

  console.log("print");

    // var deck = [];
    // var players = [];
    // var cardOnTable = [];
    var highBid = 0;
    var highBidder = 0;

    // for(var i = 0; i < 4;i++){
    //  var player = new Object();
    //  player.ident = i;
    //  player.hand = [];
    //  players.push(player)
    // }

    function createTable(){
      socket.emit('player_name', name);
      console.log("socket");
    }

    function deal(){
      socket.emit('deal', player.id);
      socket.on('hand', function(hand){
        console.log(hand[0].img);
        player.hand = hand;
        for(var i = 0; i < 9;i++){
          addTheImage(hand[i]);
        }
      })

    }

    function addTheImage(card) {
      console.log(card);
        var img = document.createElement('img');
        img.id = "elem";
        img.src = card.img;
        img.onclick = function() { selectCard(card); };
        document.body.appendChild(img);
    }

    function selectCard(card){
     var x;
     var r=confirm("You selected "+getName(card));
     if (r==true)
       {
         x="You pressed OK!";
       }
     else
       {
         x="You pressed Cancel!";
       }
    document.getElementById("card").innerHTML=x;
    }

    function getName(card){
     var suitName = "nothing";
     var valName = "nothing";

     if(card.suit == 0){
       suitName = "clubs";
     }
     if(card.suit == 1){
       suitName = "spades";
     }
     if(card.suit == 2){
       suitName = "hearts";
     }
     if(card.suit == 3){
       suitName = "diamonds";
     }
     if(card.suit== 4){
       suitName = "Joker";
       if(card.val == 0){
         valName = "low";
       } else valName = "high";
       return valName + " " + suitName
     }
     if(card.val < 9){
       valName = card.val;
     }
     if(card.val == 9){
       valName = "Jack";
     }
     if(card.val == 10){
       valName = "Queen";
     }
     if(card.val == 11){
       valName = "King";
     }
     if(card.val==12){
       valName = "Ace";
     }
     return valName+" of "+suitName;
    }

    function bid(){
      var x;

      var bid=prompt("Please enter your bid");

      if (bid!=null){
        if(bid > highBid){
         highBid = bid;
        }
        x="Your bid is " + bid;
        document.getElementById("cards").innerHTML=x;
      }
    }

    </script>
<button onclick="createTable()">Create/Join Table</button>
<button onclick="deal()">deal</button>
<button onclick="bid()">Make Bid</button>
<p id="cards">Initializing Game</p>
  <div id="date"></div>
  <textarea id="text"></textarea>


</body>
</html>




<!-- <canvas id="backgroundCanvas">
    Your browser doesn't support HTML5. Please install Internet Explorer 9 :
    <br />
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie9_bow_Bing&WT.srch=1&mtag=SearBing">
        http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie9_bow_Bing&WT.srch=1&mtag=SearBing</a>
</canvas>

<script type="text/javascript" src="background.js"></script>

<script type="text/javascript" src="game.js"></script>
<svg id="svgRoot">
<circle cx="100" cy="100" r="10" id="ball" />
<rect id="pad" height="15px" width="150px" x="200" y="200" rx="10" ry="20"/>
</svg> 

